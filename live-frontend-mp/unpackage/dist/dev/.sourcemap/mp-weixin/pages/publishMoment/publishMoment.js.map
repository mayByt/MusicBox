{"version":3,"sources":["uni-app:///main.js","webpack:///Z:/myWork/MusicBox/live-frontend-mp/pages/publishMoment/publishMoment.vue?5753","webpack:///Z:/myWork/MusicBox/live-frontend-mp/pages/publishMoment/publishMoment.vue?65f7","webpack:///Z:/myWork/MusicBox/live-frontend-mp/pages/publishMoment/publishMoment.vue?ee70","webpack:///Z:/myWork/MusicBox/live-frontend-mp/pages/publishMoment/publishMoment.vue?aed3","uni-app:///pages/publishMoment/publishMoment.vue","webpack:///Z:/myWork/MusicBox/live-frontend-mp/pages/publishMoment/publishMoment.vue?cc55","webpack:///Z:/myWork/MusicBox/live-frontend-mp/pages/publishMoment/publishMoment.vue?0403"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,oH,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,sBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAynB,CAAgB,unBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4G7oB,uG;;AAEA;AACA,MADA,kBACA;AACA;AACA;AACA,2BAFA;;AAIA;AACA,4BALA;AAMA;AACA,gCAPA;AAQA,4BARA;AASA;AACA;AACA,iBADA;AAEA,eAFA;AAGA,gBAHA;AAIA,iBAJA;AAKA,oBALA;AAMA,sBANA;AAOA,uBAPA,EAVA;;AAmBA,wBAnBA;;AAqBA;AACA,uBAtBA;AAuBA;AACA,mBAxBA;AAyBA;AACA,qBA1BA;;AA4BA;AACA,0BA7BA;;AA+BA,GAjCA;AAkCA;AACA,cADA,wBACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KATA,EAlCA;;AA6CA,QA7CA,kBA6CA,OA7CA,EA6CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEADA;AAEA,uCAFA;AAGA,oBAHA;AAIA;AACA,wDADA,EAJA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAhBA;AAiBA;AACA;AACA,SAnBA;AAoBA;AACA;AACA,SAtBA;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA;AACA;AACA;AACA;;;AAGA,GA5FA;AA6FA;AACA;AACA,eAFA,yBAEA;AACA;AACA,gBADA;AAEA,8BAFA;AAGA,6BAHA;AAIA;AACA,8EADA;AAEA;AACA,uCADA;AAEA,oCAFA,IAFA;;;;;AASA,qCATA,4EASA,CATA;AAUA,gCAVA,GAUA,oBAVA;;AAYA;AACA,yCADA,GAZA,iHAYA,KAZA,6BAYA,SAZA;;AAeA;;AAEA,wCAFA;AAGA,4CAHA;AAIA,8CAJA,IAfA,oKAJA;;;;;AA4BA,KA/BA;;AAiCA;AACA,eAlCA,uBAkCA,CAlCA,EAkCA;AACA;AACA;AACA,KArCA;;AAuCA;AACA,oBAxCA,8BAwCA;AACA;AACA,gBADA;AAEA,8BAFA;AAGA,6BAHA;AAIA;AACA,gCADA,GACA,oBADA;AAEA;AACA,yCADA,GAFA,oHAEA,KAFA,6BAEA,SAFA;;;AAMA,iEANA,kHAMA,GANA;AAOA;AACA;AACA,gEATA,gJAJA;;;AAgBA,KAzDA;AA0DA;AACA,oBA3DA,4BA2DA,CA3DA,EA2DA;AACA;AACA;AACA;AACA;AACA,KAhEA;;AAkEA;AACA,WAnEA,qBAmEA;;AAEA,+CAFA;AAGA;AACA,qBAJA,GAIA;AACA,uDADA;AAEA,iDAFA,EAJA;;AAQA,sEARA,kHAQA,gBARA,6BAQA,iBARA;;AAUA;AACA;AACA,2CADA;;AAGA,iBAdA;;;AAiBA;AACA;AACA,iCADA,IAlBA;;AAqBA,oCArBA,gFAqBA,CArBA;;AAuBA,yBAvBA,GAuBA,uBAvBA;AAwBA,+DAxBA,qHAwBA,GAxBA;AAyBA;AACA;AACA,0BADA;AAEA,wCAFA;AAGA,0CAHA,IA1BA;;;;AAiCA,sBAjCA,GAiCA;AACA,+CADA;AAEA,iDAFA,EAjCA;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCA/CA;AAgDA;AACA,wBADA,CAhDA,qHAgDA,iBAhDA,6BAgDA,kBAhDA;AAkDA;;AAEA;AACA;AACA,2CADA;;AAGA,iBAxDA;;;AA2DA,KA9HA,EA7FA,E;;;;;;;;;;;;;AC9GA;AAAA;AAAA;AAAA;AAAk5B,CAAgB,42BAAG,EAAC,C;;;;;;;;;;;ACAt6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/publishMoment/publishMoment.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/publishMoment/publishMoment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./publishMoment.vue?vue&type=template&id=26e02066&\"\nvar renderjs\nimport script from \"./publishMoment.vue?vue&type=script&lang=js&\"\nexport * from \"./publishMoment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publishMoment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/publishMoment/publishMoment.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publishMoment.vue?vue&type=template&id=26e02066&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.textareaFocused = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publishMoment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publishMoment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\r\n\t\t<!-- 视频上传 -->\r\n\t\t<view class=\"video-area\" v-if=\"publishType==='VIDEO'\">\r\n\t\t\t<view class=\"video-cover-wrapper\">\r\n\t\t\t\t<image class=\"video-cover\" v-if=\"video && video.coverUrl\" :src=\"video.coverUrl\" mode=\"aspectFill\">\r\n\t\t\t\t</image>\r\n\t\t\t\t<view class=\"video-cover-alternate\" v-if=\"!video || !video.coverUrl\">\r\n\t\t\t\t\t暂未添加封面\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"video-upload-wrapper\">\r\n\t\t\t\t<view class=\"video-upload-original-title\" v-if=\"videoUploadComplete\">\r\n\t\t\t\t\t{{video.title ? video.title : videoOriginalTitle}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"video-upload-result\" v-if=\"videoUploadComplete\">\r\n\t\t\t\t\t<image src=\"../../static/icon/video-upload-complete.png\"></image>\r\n\t\t\t\t\t<text>视频上传成功！</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"video-upload-progress\" v-if=\"!videoUploadComplete\">\r\n\t\t\t\t\t<view class=\"video-upload-progress-total\">\r\n\t\t\t\t\t\t<view class=\"video-upload-progress-part\" :style=\"{width:videoUploadPercent * 3.2 +'rpx'}\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"video-upload-progress-percnet\">\r\n\t\t\t\t\t\t{{videoUploadPercent}}%\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 视频选择封面 -->\r\n\t\t<view class=\"video-cover-area\" v-if=\"publishType==='VIDEO'\">\r\n\t\t\t<view class=\"video-choose-cover\" @click=\"chooseVideoCover\">\r\n\t\t\t\t上传自定义封面\r\n\t\t\t</view>\r\n\t\t\t<view class=\"video-generated-cover\" v-if=\"videoCoverList && videoCoverList.length > 0\"\r\n\t\t\t\tv-for=\"v in videoCoverList\">\r\n\t\t\t\t<image :src=\"v.url\" :data-video-cover-url=\"v.url\" :data-video-cover-width=\"v.width\"\r\n\t\t\t\t\t:data-video-cover-height=\"v.height\" @click=\"selectVideoCover\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 视频标题 -->\r\n\t\t<view class=\"video-title\" v-if=\"publishType==='VIDEO'\">\r\n\t\t\t<input class=\"video-title-input\" v-model=\"video.title\" type=\"text\" value=\"\" placeholder=\"给视频取个标题吧~\" />\r\n\t\t</view>\r\n\t\t<!-- 文本内容 -->\r\n\t\t<view class=\"textarea-wrapper\">\r\n\t\t\t<textarea v-model=\"textContent\" class=\"textarea\"\r\n\t\t\t\t:placeholder=\"publishType === 'REPOST' ? '说说我的看法...' : '一起聊聊吧~' \"\r\n\t\t\t\t@click=\"textareaFocused=true\"></textarea>\r\n\t\t</view>\r\n\r\n\t\t<!-- 图片区域 -->\r\n\t\t<view class=\"image-area\" v-if=\"publishType === 'MOMENT'\">\r\n\t\t\t<view class=\"image-wrapper\" v-for=\"(tempImage, index) in imageTempList\">\r\n\t\t\t\t<image class=\"image\" mode=\"aspectFill\" :src=\"tempImage.path\">\r\n\t\t\t\t</image>\r\n\t\t\t\t<view class=\"remove-image\" @click=\"removeImage\" :data-image-index=\"index\">\r\n\t\t\t\t\t<view class=\"remove-image-horizontal\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"remove-image-vertical\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"add-image\" @click=\"chooseImage\">\r\n\t\t\t\t<view class=\"add-image-horizontal\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"add-image-vertical\">\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 图片，@，话题，标签等编辑信息-->\r\n\t\t<view class=\"edit-info\">\r\n\t\t\t<view class=\"edit-info-image-wrapper\">\r\n\t\t\t\t<view class=\"edit-info-image-view\">\r\n\t\t\t\t\t<image src=\"../../static/icon/publish_photo.png\" class=\"edit-info-image\" @click=\"chooseImage\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"edit-info-image-view\">\r\n\t\t\t\t\t<image src=\"../../static/icon/publish_at.png\" class=\"edit-info-image\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"edit-info-image-view\">\r\n\t\t\t\t\t<image src=\"../../static/icon/publish_topic.png\" class=\"edit-info-image\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"edit-info-image-view\">\r\n\t\t\t\t\t<image src=\"../../static/icon/publish_tag.png\" class=\"edit-info-image\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"edit-info-publish-wrapper\">\r\n\t\t\t\t<view class=\"edit-info-publish-word-count\">\r\n\t\t\t\t\t{{textContent.length}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"edit-info-publish-button\" @click=\"publish\">\r\n\t\t\t\t\t发布\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport httpUtils from '../../common/util/httpUtils.js';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 发布类型：MOMENT，VIDEO，REPOST\r\n\t\t\t\tpublishType: \"MOMENT\",\r\n\r\n\t\t\t\t// 视频原始名称\r\n\t\t\t\tvideoOriginalTitle: \"\",\r\n\t\t\t\t// 视频上传结果\r\n\t\t\t\tvideoUploadComplete: false,\r\n\t\t\t\tvideoUploadPercent: 10,\r\n\t\t\t\t// 视频信息\r\n\t\t\t\tvideo: {\r\n\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\turl: \"\",\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tcoverUrl: \"\",\r\n\t\t\t\t\tcoverWidth: \"\",\r\n\t\t\t\t\tcoverHeight: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tvideoCoverList: [],\r\n\r\n\t\t\t\t// 临时图片列表\r\n\t\t\t\timageTempList: [],\r\n\t\t\t\t// 图片列表\r\n\t\t\t\timageList: [],\r\n\t\t\t\t// textarea文本内容\r\n\t\t\t\ttextContent: \"\",\r\n\r\n\t\t\t\t// 转发信息\r\n\t\t\t\trepostMomentId: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmomentType() {\r\n\t\t\t\tif (this.imageList && this.imageList.length > 0) {\r\n\t\t\t\t\treturn \"IMAGE\";\r\n\t\t\t\t} else if (this.videoUploadComplete) {\r\n\t\t\t\t\treturn \"VIDEO\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"TEXT\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.publishType = options.publishType;\r\n\r\n\t\t\t// 视频\r\n\t\t\tif (this.publishType === 'VIDEO') {\r\n\t\t\t\tthis.videoOriginalTitle = options.videoOriginalTitle;\r\n\t\t\t\tthis.video.width = options.videoWidth;\r\n\t\t\t\tthis.video.height = options.videoHeight;\r\n\t\t\t\t// 上传视频\r\n\t\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\t\turl: getApp().globalData.domain + \"/oss/uploadImageOrVideo\",\r\n\t\t\t\t\tfilePath: options.tempVideoPath,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\"token\": uni.getStorageSync(\"loginUser\").token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (uploadFileRes) => {\r\n\t\t\t\t\t\tconsole.log('成功了')\r\n\t\t\t\t\t\tlet uploadData = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\t\tthis.video.url = uploadData.body;\r\n\t\t\t\t\t\tconsole.log(\"上传完成：\" + uploadFileRes.data);\r\n\t\t\t\t\t\t// let [data] = await httpUtils.postJson(\"/video/queryVideoCover\", {\r\n\t\t\t\t\t\t// \tvideoPath: uploadFileRes.data\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t// this.videoCoverList = data.body;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\tconsole.log('This is complete' + '调用完成')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tuploadTask.onProgressUpdate((res) => {\r\n\t\t\t\t\tconsole.log('上传进度：' + res.progress);\r\n\t\t\t\t\tthis.videoUploadPercent = res.progress;\r\n\t\t\t\t\tif (this.videoUploadPercent === 100) {\r\n\t\t\t\t\t\tthis.videoUploadComplete = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.publishType === 'REPOST') {\r\n\t\t\t\tthis.repostMomentId = options.repostMomentId;\r\n\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 选择图片\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 9,\r\n\t\t\t\t\tsizeType: ['original'],\r\n\t\t\t\t\tsourceType: ['album'],\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (this.imageTempList.length + res.tempFilePaths.length > 9) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"最多上传9张图片\",\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (let i in res.tempFilePaths) {\r\n\t\t\t\t\t\t\tlet tempFilePath = res.tempFilePaths[i];\r\n\r\n\t\t\t\t\t\t\tlet [error, imageInfo] = await uni.getImageInfo({\r\n\t\t\t\t\t\t\t\tsrc: tempFilePath\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.imageTempList.push({\r\n\r\n\t\t\t\t\t\t\t\tpath: tempFilePath,\r\n\t\t\t\t\t\t\t\twidth: imageInfo.width,\r\n\t\t\t\t\t\t\t\theight: imageInfo.height\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 移除图片\r\n\t\t\tremoveImage(e) {\r\n\t\t\t\tlet imageIndex = e.currentTarget.dataset.imageIndex;\r\n\t\t\t\tthis.imageTempList.splice(imageIndex, 1);\r\n\t\t\t},\r\n\r\n\t\t\t// 选择视频封面\r\n\t\t\tchooseVideoCover() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['original'],\r\n\t\t\t\t\tsourceType: ['album'],\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tlet tempFilePath = res.tempFilePaths[0];\r\n\t\t\t\t\t\tlet [error, imageInfo] = await uni.getImageInfo({\r\n\t\t\t\t\t\t\tsrc: tempFilePath\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tlet [url] = await httpUtils.uploadFile(tempFilePath);\r\n\t\t\t\t\t\tthis.video.coverUrl = url;\r\n\t\t\t\t\t\tthis.video.coverWidth = imageInfo.width;\r\n\t\t\t\t\t\tthis.video.coverHeight = imageInfo.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 选择视频封面\r\n\t\t\tselectVideoCover(e) {\r\n\t\t\t\tconsole.log(e.currentTarget.dataset)\r\n\t\t\t\tthis.video.coverUrl = e.currentTarget.dataset.videoCoverUrl;\r\n\t\t\t\tthis.video.coverWidth = e.currentTarget.dataset.videoCoverWidth;\r\n\t\t\t\tthis.video.coverHeight = e.currentTarget.dataset.videoCoverHeight;\r\n\t\t\t},\r\n\r\n\t\t\t// 发动态，转发动态\r\n\t\t\tasync publish() {\r\n\r\n\t\t\t\tif (this.publishType === 'REPOST') {\r\n\t\t\t\t\t// 转发\r\n\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\trepostMomentId: this.repostMomentId,\r\n\t\t\t\t\t\ttextContent: this.textContent\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet [repostMomentData, repostMomentError] = await httpUtils.postJson(\"/repost/repost\", param);\r\n\r\n\t\t\t\t\tif (!repostMomentError) {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: \"../square/square\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 发动态或发视频\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: \"发布中...\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let i in this.imageTempList) {\r\n\r\n\t\t\t\t\t\tlet imageTemp = this.imageTempList[i];\r\n\t\t\t\t\t\tlet [url] = await httpUtils.uploadFile(imageTemp.path);\r\n\t\t\t\t\t\tconsole.log(\"已上传：\" + url);\r\n\t\t\t\t\t\tthis.imageList.push({\r\n\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\twidth: imageTemp.width,\r\n\t\t\t\t\t\t\theight: imageTemp.height\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\tmomentType: this.momentType,\r\n\t\t\t\t\t\ttextContent: this.textContent\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (this.momentType === 'TEXT') {\r\n\t\t\t\t\t\t// check\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.momentType === 'IMAGE') {\r\n\t\t\t\t\t\tparam.imageList = this.imageList;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.momentType === 'VIDEO') {\r\n\t\t\t\t\t\tparam.video = this.video;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconsole.log(param);\r\n\t\t\t\t\tlet [publishMomentData, publishMomentError] = await httpUtils.postJson(\"/moment/publishMoment\",\r\n\t\t\t\t\t\tparam);\r\n\t\t\t\t\tuni.hideLoading();\r\n\r\n\t\t\t\t\tif (!publishMomentError) {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: \"../square/square\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/* 视频区域 */\r\n\t.video-area {\r\n\t\tpadding: 0 30rpx;\r\n\t\tmargin: 20rpx 0 30rpx 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tborder-radius: 10rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.video-cover-wrapper {\r\n\t\twidth: 312rpx;\r\n\t\theight: 176rpx;\r\n\t}\r\n\r\n\t.video-cover {\r\n\t\twidth: 312rpx;\r\n\t\theight: 176rpx;\r\n\t}\r\n\r\n\t.video-cover-alternate {\r\n\t\twidth: 312rpx;\r\n\t\theight: 176rpx;\r\n\t\tbackground-color: #d8d8d8;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 30rpx;\r\n\t\tline-height: 146rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.video-upload-wrapper {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333333;\r\n\t\tbackground-color: #f9fafb;\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.video-upload-original-title {\r\n\t\twidth: 220rpx;\r\n\t\ttext-align: center;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.video-upload-result {\r\n\t\tcolor: #999999;\r\n\t\tfont-size: 28rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.video-upload-result image {\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: #ea524e;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.video-upload-progress {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.video-upload-progress-total {\r\n\t\twidth: 320rpx;\r\n\t\theight: 14rpx;\r\n\t\tbackground-color: #E8EAF3;\r\n\t\tborder-radius: 280rpx;\r\n\t\toverflow: hidden;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.video-upload-progress-part {\r\n\t\twidth: 100rpx;\r\n\t\theight: 14rpx;\r\n\t\tbackground-color: #EE6762;\r\n\t}\r\n\r\n\t/* 视频封面 */\r\n\t.video-cover-area {\r\n\t\tmargin: 0 30rpx;\r\n\t\theight: 146rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: nowrap;\r\n\t\toverflow-x: auto;\r\n\t\toverflow-y: hidden;\r\n\t\theight: 146rpx;\r\n\t}\r\n\r\n\t.video-choose-cover {\r\n\t\tflex-shrink: 0;\r\n\t\twidth: 260rpx;\r\n\t\theight: 146rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 146rpx;\r\n\t\tcolor: #999;\r\n\t\tbackground-color: #F9FAFB;\r\n\t}\r\n\r\n\t.video-choose-cover:active {\r\n\t\tbackground-color: #d7d7d7;\r\n\t}\r\n\r\n\t.video-generated-cover {\r\n\t\twidth: 260rpx;\r\n\t\theight: 146rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.video-generated-cover image {\r\n\t\twidth: 260rpx;\r\n\t\theight: 146rpx;\r\n\t}\r\n\r\n\t/* 视频标题 */\r\n\t.video-title {\r\n\t\tpadding: 20rpx 30rpx 20rpx 30rpx;\r\n\t}\r\n\r\n\t.video-title-input {\r\n\t\tfont-size: 30rpx;\r\n\t\tline-height: 70rpx;\r\n\t\tletter-spacing: 1rpx;\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\t/* border-top: 1rpx solid #efefef; */\r\n\t\tborder-bottom: 1rpx solid #efefef;\r\n\t\tpadding-bottom: 10rpx;\r\n\t}\r\n\r\n\t/* 文本域 */\r\n\t.textarea-wrapper {\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\r\n\t.textarea {\r\n\t\tfont-size: 30rpx;\r\n\t\tline-height: 48rpx;\r\n\t\tletter-spacing: 1rpx;\r\n\t\theight: 280rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t/* 图片区域 */\r\n\t.image-area {\r\n\t\tpadding: 30rpx 30rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.image-wrapper {\r\n\t\tposition: relative;\r\n\t\twidth: 216rpx;\r\n\t\theight: 216rpx;\r\n\t\tmargin-bottom: 22rpx;\r\n\t\tmargin-right: 14rpx;\r\n\t}\r\n\r\n\t.image {\r\n\t\twidth: 216rpx;\r\n\t\theight: 216rpx;\r\n\t}\r\n\r\n\t/* 删除图片按钮 */\r\n\t.remove-image {\r\n\t\tposition: absolute;\r\n\t\twidth: 26rpx;\r\n\t\theight: 26rpx;\r\n\t\tbackground-color: #000000;\r\n\t\topacity: 0.5;\r\n\t\ttop: 6rpx;\r\n\t\tright: 6rpx;\r\n\t\tborder-radius: 50%;\r\n\t\ttransform: rotate(45deg);\r\n\t}\r\n\r\n\t.remove-image-horizontal {\r\n\t\twidth: 14rpx;\r\n\t\theight: 2rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\topacity: 1;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t.remove-image-vertical {\r\n\t\twidth: 2rpx;\r\n\t\theight: 14rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\topacity: 1;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t/* 添加图片按钮 */\r\n\t.add-image {\r\n\t\tposition: relative;\r\n\t\twidth: 216rpx;\r\n\t\theight: 216rpx;\r\n\t\tbackground-color: #f7f7f7;\r\n\t\tmargin-bottom: 22rpx;\r\n\t\tmargin-right: 14rpx;\r\n\t\ttransition: background-color 0.3s;\r\n\t}\r\n\r\n\t.add-image:active {\r\n\t\tbackground-color: #d7d7d7;\r\n\t}\r\n\r\n\t.add-image-horizontal {\r\n\t\twidth: 60rpx;\r\n\t\theight: 4rpx;\r\n\t\tbackground-color: #aeaeae;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tmargin: auto;\r\n\t\ttransition: background-color 0.5s;\r\n\t}\r\n\r\n\t.add-image-vertical {\r\n\t\twidth: 4rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground-color: #aeaeae;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tmargin: auto;\r\n\t\ttransition: background-color 0.5s;\r\n\t}\r\n\r\n\t.add-image-horizontal:active {\r\n\t\tbackground-color: #7b7b7b;\r\n\t}\r\n\r\n\t.add-image-vertical:active {\r\n\t\tbackground-color: #7b7b7b;\r\n\t}\r\n\r\n\r\n\t/* 图片，@，话题，标签等编辑信息 */\r\n\t.edit-info {\r\n\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 82rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tborder-top: 2rpx solid #EAEAEA;\r\n\t\tborder-bottom: 2rpx solid #EAEAEA;\r\n\t}\r\n\r\n\t.edit-info-image-wrapper {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.edit-info-image-view {\r\n\t\twidth: 66rpx;\r\n\t\theight: 66rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.edit-info-image-view:active {\r\n\t\tbackground-color: #fbfbfb;\r\n\t}\r\n\r\n\t.edit-info-image {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\r\n\r\n\t.edit-info-publish-wrapper {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\theight: 56rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 56rpx;\r\n\t}\r\n\r\n\t.edit-info-publish-word-count {\r\n\t\tcolor: #9C9C9C;\r\n\t\tmargin-right: 16rpx;\r\n\t}\r\n\r\n\t.edit-info-publish-button {\r\n\t\twidth: 126rpx;\r\n\t\tborder-radius: 34rpx;\r\n\t\tbackground-color: #f6423d;\r\n\t\ttext-align: center;\r\n\t\tcolor: #ffffff;\r\n\t\ttransition: background-color 0.2;\r\n\t}\r\n\r\n\t.edit-info-publish-button:active {\r\n\t\tbackground-color: #fa0021;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publishMoment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publishMoment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1657632139985\n      var cssReload = require(\"Z:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}